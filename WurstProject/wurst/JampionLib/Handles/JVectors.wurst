package JVectors

public function vec2.nearestOnSegment(vec2 v1, vec2 v2) returns vec2
	let l2 = v1.distanceToSq(v2)
	if l2 == 0
		return v1
	let t = ((this.x - v1.x) * (v2.x - v1.x) + (this.y - v1.y) * (v2.y - v1.y)) / l2
	if (t < 0)
		return v1
	if (t > 1)
		return v2
	return vec2(v1.x + t * (v2.x - v1.x), v1.y + t * (v2.y - v1.y))
